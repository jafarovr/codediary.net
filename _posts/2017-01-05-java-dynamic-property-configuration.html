---
layout: post
status: publish
published: true
title: Java Dynamic Property Configuration
author:
  display_name: codediary.net
  login: codediary
  email: info@codediary.net
  url: ''
author_login: codediary
author_email: info@codediary.net
wordpress_id: 83
wordpress_url: https://codediary.net/?p=83
date: '2017-01-05 16:14:12 +0000'
date_gmt: '2017-01-05 12:14:12 +0000'
categories:
- Coding
- Java
tags: []
---
<p>Recently, I&nbsp;had the need of changing <code>config.properties</code>&nbsp;(predefined application configuration) in Java without restarting the application. I found out a very nice library from Netflix which constantly looks for the changes in your config file and applies these variables runtime.</p>
<p><!--more--></p>
<p>I am adding maven repository of the library and an example code. Full documentation is available at:&nbsp;<a href="https://github.com/Netflix/archaius" target="_blank" rel="noopener noreferrer">https://github.com/Netflix/archaius</a></p>
<pre class="lang:default decode:true "><dependency>
  <groupId>com.netflix.archaius</groupId>
  <artifactId>archaius-core</artifactId>
  <version>0.6.0</version>
</dependency></pre>
<pre class="lang:default decode:true">import com.google.common.util.concurrent.RateLimiter;
import com.mysql.jdbc.jdbc2.optional.MysqlDataSource;
import com.netflix.config.*;
import com.netflix.config.sources.JDBCConfigurationSource;
import com.netflix.config.sources.URLConfigurationSource;

import java.io.File;

public class DynamicConfigTest {

  public static void main(String... args) throws Exception {

    MysqlDataSource ds = new MysqlDataSource();
    ds.setServerName("localhost");
    ds.setPortNumber(3306);
    ds.setDatabaseName("config");
    ds.setUser("root");
    ds.setPassword("password");

    // config to read values from database
    JDBCConfigurationSource jdbcConfigurationSource = new JDBCConfigurationSource(ds, "SELECT * FROM params", "key", "value");

    // config to read values from file.
    URLConfigurationSource urlConfigurationSource = new URLConfigurationSource(new File(System.getProperty("user.dir") + "/config.properties").toURI().toURL());

    // following FixedDelayPollingScheduler define how often it should read the file or database.
    ConfigurationManager.install(new DynamicConfiguration(urlConfigurationSource, new FixedDelayPollingScheduler(1000, 1000, false)));

    DynamicIntProperty test = DynamicPropertyFactory.getInstance().getIntProperty("key", 10000);

    System.out.println(test);

    test.addCallback(new Runnable() {
      @Override
      public void run() {
        System.out.println("value changed to: " + test.get());
      }
    });
  }
}</pre>
<pre class="lang:default decode:true  "># config.properties
key=1</pre>
<p>I found this library very useful, often I needed to change logging level from INFO to DEBUG to debug my application in runtime. This library helped me to do it, hope&nbsp;you'd find it helpful too.</p>
