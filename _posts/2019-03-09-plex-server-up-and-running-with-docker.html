---
layout: post
status: publish
published: true
title: Plex Server Up and Running with Docker
author:
  display_name: codediary.net
  login: codediary
  email: info@codediary.net
  url: ''
author_login: codediary
author_email: info@codediary.net
wordpress_id: 293
wordpress_url: https://codediary.net/?p=293
date: '2019-03-09 12:28:42 +0000'
date_gmt: '2019-03-09 12:28:42 +0000'
categories:
- Random
- Linux
- Docker
tags:
- docker
- plex
- media center
- home media center
- video files
- plex.tv
---
<p><!-- wp:paragraph --></p>
<p><a href="https://plex.tv/" rel="noreferrer noopener" target="_blank">Plex</a>&nbsp;is a media server which aggregates your media and allows you to access it on your home network. Installing the server is relatively simple&hellip; Installing it with Docker is even simpler. Docker also makes it easy to define a single configuration which is reusable across environments.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>I&rsquo;m working off a Ubuntu installation, since that is where I&rsquo;m setting up my home media centre, but once docker is installed, getting Plex going should be nearly identical in any OS.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:more --><br />
<!--more--><br />
<!-- /wp:more --></p>
<p><!-- wp:paragraph --></p>
<p>The only requirement is that Docker is installed on your machine/vm:</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">$ sudo apt-get install docker.io<br>$ docker --version<br>Docker version 1.12.3, build 6b644ec</pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:paragraph --></p>
<p>Next we pull the latest Plex Docker image:</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">$ sudo docker pull plexinc/pms-docker<br>Using default tag: latest<br>latest: Pulling from plexinc/pms-docker<br><br>8aec416115fd: Downloading 22.87 MB/50.31 MB<br>695f074e24e3: Download complete <br>946d6c48c2a7: Download complete <br>bc7277e579f0: Download complete <br>2508cbcde94b: Download complete <br>8c4564719b44: Download complete <br>58f7154b2281: Download complete <br>8ceeaf7f0f36: Downloading 36.76 MB/101.7 MB<br>Digest: sha256:a31aada7c1ed938772c3742569edd47078ae53563b9d2c53f...<br>Status: Downloaded newer image for plexinc/pms-docker:latest</pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:paragraph --></p>
<p>We also should create somewhere for Plex to store config and transcoded data (this is optional).</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">$ mkdir ~/.plex<br>$ mkdir ~/.plex/config<br>$ mkdir ~/.plex/transcode</pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:paragraph --></p>
<p>And finally, we run a new container with mapped host ports to ports required by Plex within the container:<br></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">$ sudo docker run \<br>-d \<br>--name plex \<br>-p 32400:32400/tcp \<br>-p 3005:3005/tcp \<br>-p 8324:8324/tcp \<br>-p 32469:32469/tcp \<br>-p 1900:1900/udp \<br>-p 32410:32410/udp \<br>-p 32412:32412/udp \<br>-p 32413:32413/udp \<br>-p 32414:32414/udp \<br>-e TZ="YOUR-TIME-ZONE" \<br>-e PLEX_CLAIM="YOUR-CLAIM" \<br>-e ADVERTISE_IP="http://192.168.1.10:32400/" \<br>-h 192.168.1.10 \<br><code>-v ~/.plex/config:/config \<br>-v ~/.plex/transcode:/transcode \<br></code>-v ~/media:/data \<br>plexinc/pms-docker</pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:paragraph --></p>
<p>The first two&nbsp;<code>-v</code>&nbsp;flags are only necessary if you created the&nbsp;<code>config</code>&nbsp;and&nbsp;<code>transcode</code>&nbsp;directories.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>The port mappings (<code>-p 32400:32400/tcp</code>) map a port from the host (left), to the container (right).</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Simply replace the timezone with your timezone, and get a&nbsp;<a rel="noreferrer noopener" href="https://plex.tv/claim" target="_blank">Plex Claim</a>. The IP addresses must be the IP address of the&nbsp;<em>host&nbsp;</em>machine, not the IP allocated to container itself.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">$ sudo docker ps<br>CONTAINER ID        IMAGE                COMMAND             CREATED             STATUS                    PORTS                                                                                                                                                                                        NAMES<br>86fba9199b7e        plexinc/pms-docker   "/init"             11 minutes ago      Up 2 minutes (healthy)    0.0.0.0:3005->3005/tcp, 0.0.0.0:8324->8324/tcp, 0.0.0.0:1900->1900/udp, 0.0.0.0:32410->32410/udp, 0.0.0.0:32400->32400/tcp, 0.0.0.0:32412-32414->32412-32414/udp, 0.0.0.0:32469->32469/tcp   plex</pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:paragraph --></p>
<p>It takes a few minutes for Plex server to boot up. Once up, you should be able to browse to&nbsp;<code>http://<your-ip>:32400</code>. The app is available at&nbsp;<code>http://<your-ip>:32400/web</code>. Also, the server is now discoverable; if you have the Plex app installed on your iPhone/iPad, you should be able to see the server in the app.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>If you are using Google Cloud Compute engine (or maybe AWS, an ecosystem that has enterprise-grade firewall setup)  to run Plex server, need to set ADVERTISE_IP as external IP of the server. </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">$ curl ipinfo.io                                                                                                                                                                <br>{<br>   "ip": "xx.xxx.xx.xxx",<br>   "hostname": "xx.xxx.xx.xxx.bc.googleusercontent.com",<br>   "city": "",<br>   "region": "",<br>   "country": "US",<br>   "loc": "",<br>   "org": "Google LLC"<br> }%</pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:paragraph --></p>
<p>The server will be automatically detected by Plex and you are all set up. If not detected, you can manually log in the server and set it up. To do that you need to map your local 32400 to server and visit <a href="http://localhost:32400/web/">http://localhost:32400/web/</a></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">$ ssh -L 32400:localhost:32400 username@xx.xxx.xx.xxx<br></pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:paragraph --></p>
<p>Note that, when you set external IP as host IP, Plex server will be accessible from public (<a href="http://xx.xxx.xx.xxx:32400/web/">http://xx.xxx.xx.xxx:32400/web/</a>) on 32400, <em>ideally</em> you can just open Plex using external IP to complete the setup, but Plex doesn't let you set it up when you use external IP, that's why we do local port mapping.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:image {"id":294} --></p>
<figure class="wp-block-image"><img src="https://codediary.net/wp-content/uploads/2019/03/image.png" alt="" class="wp-image-294"/></figure>
<p><!-- /wp:image --></p>
<p><!-- wp:paragraph --></p>
<p>Have fun!</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Originally posted on: <a href="https://medium.com/tyrone-tudehope/plex-server-up-and-running-with-docker-d21b2c0a3dd1">https://medium.com/tyrone-tudehope/plex-server-up-and-running-with-docker-d21b2c0a3dd1</a></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Official Docker repo: <a href="https://github.com/plexinc/pms-docker">https://github.com/plexinc/pms-docker</a></p>
<p><!-- /wp:paragraph --></p>
